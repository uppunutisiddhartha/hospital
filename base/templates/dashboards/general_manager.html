<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>GM Content Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <!-- Chart.js for statistics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      :root {
        --primary-color: #2c3e50;
        --secondary-color: #3498db;
        --success-color: #27ae60;
        --warning-color: #f39c12;
        --danger-color: #e74c3c;
        --light-bg: #f8f9fa;
        --dark-bg: #2c3e50;
        --card-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        --hover-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        min-height: 100vh;
      }

      .dashboard-wrapper {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: var(--card-shadow);
        margin: 2rem auto;
        padding: 0;
        overflow: hidden;
        position: relative;
      }

      .dashboard-wrapper::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--secondary-color),
          var(--success-color)
        );
      }

      .dashboard-header {
        background: linear-gradient(135deg, var(--primary-color), #1a2530);
        color: white;
        padding: 2rem;
        position: relative;
        overflow: hidden;
      }

      .dashboard-header::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--secondary-color),
          var(--success-color)
        );
      }

      .header-content {
        position: relative;
        z-index: 2;
      }

      .dashboard-title {
        font-weight: 800;
        letter-spacing: -0.5px;
        font-size: 2.2rem;
        margin-bottom: 0.5rem;
      }

      .user-avatar {
        width: 50px;
        height: 50px;
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--success-color)
        );
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        color: white;
      }

      .stat-card {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
        border-left: 5px solid;
        height: 100%;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--hover-shadow);
      }

      .stat-card.total {
        border-left-color: var(--secondary-color);
      }
      .stat-card.published {
        border-left-color: var(--success-color);
      }
      .stat-card.pending {
        border-left-color: var(--warning-color);
      }
      .stat-card.draft {
        border-left-color: #95a5a6;
      }

      .stat-number {
        font-size: 2.5rem;
        font-weight: 800;
        line-height: 1;
        margin-bottom: 0.5rem;
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 1rem;
      }

      .stat-card.total .stat-icon {
        background: rgba(52, 152, 219, 0.1);
        color: var(--secondary-color);
      }
      .stat-card.published .stat-icon {
        background: rgba(39, 174, 96, 0.1);
        color: var(--success-color);
      }
      .stat-card.pending .stat-icon {
        background: rgba(243, 156, 18, 0.1);
        color: var(--warning-color);
      }
      .stat-card.draft .stat-icon {
        background: rgba(149, 165, 166, 0.1);
        color: #7f8c8d;
      }

      .card {
        border: none;
        border-radius: 15px;
        box-shadow: var(--card-shadow);
        transition: transform 0.3s ease;
        margin-bottom: 1.5rem;
      }

      .card:hover {
        transform: translateY(-3px);
        box-shadow: var(--hover-shadow);
      }

      .card-header {
        background: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 15px 15px 0 0 !important;
        padding: 1.25rem 1.5rem;
        font-weight: 600;
      }

      .table th {
        border-top: none;
        border-bottom: 2px solid rgba(0, 0, 0, 0.08);
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
        color: #6c757d;
        padding: 1rem 1.5rem;
      }

      .table td {
        padding: 1.25rem 1.5rem;
        vertical-align: middle;
        border-color: rgba(0, 0, 0, 0.05);
      }

      .post-thumbnail {
        width: 80px;
        height: 60px;
        object-fit: cover;
        border-radius: 8px;
        transition: transform 0.3s ease;
      }

      .post-thumbnail:hover {
        transform: scale(1.1);
      }

      .status-badge {
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.85rem;
        display: inline-flex;
        align-items: center;
        gap: 5px;
      }

      .btn-action {
        padding: 8px 16px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        border: none;
      }

      .btn-publish {
        background: linear-gradient(135deg, var(--success-color), #2ecc71);
        color: white;
      }
      .btn-hold {
        background: linear-gradient(135deg, var(--warning-color), #e67e22);
        color: white;
      }
      .btn-delete {
        background: linear-gradient(135deg, var(--danger-color), #c0392b);
        color: white;
      }
      .btn-edit {
        background: linear-gradient(135deg, #9b59b6, #8e44ad);
        color: white;
      }

      .btn-action:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        color: white;
      }

      .action-buttons {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .post-title {
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 4px;
      }

      .post-meta {
        font-size: 0.85rem;
        color: #6c757d;
        display: flex;
        gap: 15px;
      }

      .chart-container {
        background: white;
        border-radius: 15px;
        padding: 1.5rem;
        box-shadow: var(--card-shadow);
      }

      .quick-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .action-btn {
        background: white;
        border: 2px solid rgba(52, 152, 219, 0.2);
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        color: var(--primary-color);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
        min-width: 200px;
      }

      .action-btn:hover {
        background: var(--secondary-color);
        color: white;
        transform: translateY(-2px);
        border-color: var(--secondary-color);
        text-decoration: none;
      }

      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: #6c757d;
      }

      .empty-state-icon {
        font-size: 4rem;
        color: #dee2e6;
        margin-bottom: 1rem;
      }

      .filter-bar {
        background: white;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        margin-bottom: 1.5rem;
        box-shadow: var(--card-shadow);
      }

      .search-box {
        position: relative;
      }

      .search-box input {
        padding-left: 40px;
        border-radius: 10px;
        border: 2px solid rgba(0, 0, 0, 0.1);
      }

      .search-box i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
      }

      @media (max-width: 768px) {
        .action-buttons {
          flex-direction: column;
        }
        .quick-actions {
          flex-direction: column;
        }
        .action-btn {
          min-width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="container py-4">
      <div class="dashboard-wrapper">
        <!-- HEADER -->
        <div class="dashboard-header">
          <div class="row align-items-center">
            <div class="col-md-8">
              <div class="header-content">
                <h1 class="dashboard-title">Content Management Dashboard</h1>
                <p class="lead mb-0">
                  Manage, publish, and track all posts in real-time
                </p>
              </div>
            </div>
            <div class="col-md-4 text-md-right">
              <div class="d-flex align-items-center justify-content-md-end">
                <div class="mr-3 text-right">
                  <div class="font-weight-bold">General Manager</div>
                  <small class="text-light">Administrator</small>
                </div>
                <div class="user-avatar">GM</div>
              </div>
            </div>
          </div>
        </div>

        <!-- MAIN CONTENT -->
        <div class="p-4">
          <!-- QUICK ACTIONS -->
          <div class="quick-actions mb-4">
            <button
              class="action-btn"
              data-toggle="modal"
              data-target="#createPostModal"
            >
              <i class="fas fa-plus-circle"></i> Create New Post
            </button>
            <button class="action-btn" onclick="location.reload()">
              <i class="fas fa-sync-alt"></i> Refresh Data
            </button>
            <button class="action-btn" onclick="exportData()">
              <i class="fas fa-download"></i> Export Reports
            </button>
            <button class="action-btn" onclick="showAllPosts()">
              <i class="fas fa-eye"></i> View All ({{ posts|length }})
            </button>
          </div>

          <!-- REAL-TIME STATISTICS -->
          <div class="row mb-5">
            <div class="col-lg-3 col-md-6">
              <div class="stat-card total">
                <div class="stat-icon">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="stat-number" id="totalPosts">
                  {{ posts|length }}
                </div>
                <div class="stat-label">Total Posts</div>
                <div class="stat-change" id="totalChange">
                  <i class="fas fa-arrow-up text-success mr-1"></i> Updated just
                  now
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="stat-card published">
                <div class="stat-icon">
                  <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-number" id="publishedPosts">
                  {{ published_count|default:0 }}
                </div>
                <div class="stat-label">Published</div>
                <div class="stat-change">
                  {{ published_percentage|default:"0" }}% of total
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="stat-card pending">
                <div class="stat-icon">
                  <i class="fas fa-pause-circle"></i>
                </div>
                <div class="stat-number" id="pendingPosts">
                  {{ pending_count|default:0 }}
                </div>
                <div class="stat-label">On Hold</div>
                <div class="stat-change">
                  {{ pending_percentage|default:"0" }}% of total
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-6">
              <div class="stat-card draft">
                <div class="stat-icon">
                  <i class="fas fa-edit"></i>
                </div>
                <div class="stat-number" id="draftPosts">
                  {{ draft_count|default:0 }}
                </div>
                <div class="stat-label">In Draft</div>
                <div class="stat-change">Ready for review</div>
              </div>
            </div>
          </div>

          <!-- FILTER BAR -->
          <div class="filter-bar">
            <div class="row align-items-center">
              <div class="col-md-6 mb-3 mb-md-0">
                <div class="search-box">
                  <i class="fas fa-search"></i>
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Search posts..."
                    id="searchInput"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="d-flex justify-content-md-end">
                  <select class="form-control w-auto mr-2" id="statusFilter">
                    <option value="all">All Status</option>
                    <option value="publish">Published</option>
                    <option value="hold">On Hold</option>
                    <option value="draft">Draft</option>
                  </select>
                  <select class="form-control w-auto" id="sortFilter">
                    <option value="newest">Newest First</option>
                    <option value="oldest">Oldest First</option>
                    <option value="title">Title A-Z</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- POSTS TABLE -->
          <div class="card">
            <div
              class="card-header d-flex justify-content-between align-items-center"
            >
              <h5 class="mb-0">
                <i class="fas fa-list mr-2"></i>Posts Management
              </h5>
              <span class="badge badge-primary" id="visibleCount"
                >{{ posts|length }}</span
              >
            </div>
            <div class="table-responsive" id="postsTable">
              <table class="table table-hover mb-0">
                <thead>
                  <tr>
                    <th>Post</th>
                    <th>Status</th>
                    <th>Created</th>
                    <th>Last Updated</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="postsTableBody">
                  {% for post in posts %}
                  <tr
                    class="post-row"
                    data-status="{{ post.status }}"
                    data-id="{{ post.id }}"
                  >
                    <td>
                      <div class="d-flex align-items-start">
                        {% if post.image %}
                        <img
                          src="{{ post.image.url }}"
                          class="post-thumbnail mr-3"
                          alt="{{ post.title }}"
                        />
                        {% else %}
                        <div
                          class="post-thumbnail mr-3 d-flex align-items-center justify-content-center bg-light"
                        >
                          <i class="fas fa-image text-muted"></i>
                        </div>
                        {% endif %}
                        <div>
                          <div class="post-title">{{ post.title }}</div>
                          <div class="post-meta">
                            <span
                              ><i class="fas fa-hashtag"></i> ID: {{ post.id
                              }}</span
                            >
                            <span
                              ><i class="fas fa-font"></i> {{
                              post.content|length }} chars</span
                            >
                          </div>
                        </div>
                      </div>
                    </td>
                    <td>
                      {% if post.status == 'publish' %}
                      <span class="status-badge bg-success text-white">
                        <i class="fas fa-check-circle"></i> Published
                      </span>
                      {% elif post.status == 'hold' %}
                      <span class="status-badge bg-warning text-white">
                        <i class="fas fa-pause-circle"></i> On Hold
                      </span>
                      {% else %}
                      <span class="status-badge bg-secondary text-white">
                        <i class="fas fa-edit"></i> Draft
                      </span>
                      {% endif %}
                    </td>
                    <td>
                      <div class="post-date">
                        <i class="far fa-calendar mr-1"></i>
                        {{ post.created_at|date:"M d, Y"|default:"Not set" }}
                      </div>
                      <small class="text-muted"
                        >{{ post.created_at|time:"H:i"|default:"" }}</small
                      >
                    </td>
                    <td>
                      <div class="post-date">
                        <i class="far fa-clock mr-1"></i>
                        {{ post.updated_at|date:"M d, Y"|default:"Recently" }}
                      </div>
                    </td>
                    <td>
                      <div class="action-buttons">
                        {% if post.status != 'publish' %}
                        <form
                          method="post"
                          action="{% url 'gm_update_post_status' post.id %}"
                          class="d-inline"
                        >
                          {% csrf_token %}
                          <button
                            type="submit"
                            name="action"
                            value="publish"
                            class="btn-action btn-publish"
                          >
                            <i class="fas fa-rocket"></i> Publish
                          </button>
                        </form>
                        {% endif %} {% if post.status != 'hold' %}
                        <form
                          method="post"
                          action="{% url 'gm_update_post_status' post.id %}"
                          class="d-inline"
                        >
                          {% csrf_token %}
                          <button
                            type="submit"
                            name="action"
                            value="hold"
                            class="btn-action btn-hold"
                          >
                            <i class="fas fa-pause"></i> Hold
                          </button>
                        </form>
                        {% endif %}

                        <button
                          class="btn-action btn-edit"
                          onclick="editPost({{ post.id }})"
                        >
                          <i class="fas fa-edit"></i> Edit
                        </button>

                        <form
                          method="post"
                          action="{% url 'delete_post' post.id %}"
                          class="d-inline"
                          onsubmit="return confirm('Are you sure you want to delete this post?')"
                        >
                          {% csrf_token %}
                          <button type="submit" class="btn-action btn-delete">
                            <i class="fas fa-trash"></i> Delete
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                  {% empty %}
                  <tr>
                    <td colspan="5">
                      <div class="empty-state">
                        <div class="empty-state-icon">
                          <i class="fas fa-inbox"></i>
                        </div>
                        <h4>No posts found</h4>
                        <p class="mb-4">
                          Create your first post to get started
                        </p>
                        <button
                          class="action-btn"
                          data-toggle="modal"
                          data-target="#createPostModal"
                        >
                          <i class="fas fa-plus-circle mr-2"></i>Create Your
                          First Post
                        </button>
                      </div>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>

          <!-- STATISTICS CHART -->
          <div class="row mt-5">
            <div class="col-lg-8">
              <div class="chart-container">
                <h5 class="mb-4">Post Distribution</h5>
                <canvas id="postsChart" height="250"></canvas>
              </div>
            </div>
            <div class="col-lg-4">
              <div class="card">
                <div class="card-header">
                  <h5 class="mb-0">
                    <i class="fas fa-chart-line mr-2"></i>Activity Summary
                  </h5>
                </div>
                <div class="card-body">
                  <div class="mb-3">
                    <small class="text-muted">Posts Created Today</small>
                    <h3 class="mb-0">{{ today_posts|default:0 }}</h3>
                  </div>
                  <div class="mb-3">
                    <small class="text-muted">Posts This Week</small>
                    <h3 class="mb-0">{{ week_posts|default:0 }}</h3>
                  </div>
                  <div class="mb-3">
                    <small class="text-muted">Avg. Posts Per Day</small>
                    <h3 class="mb-0">{{ avg_daily|default:0 }}</h3>
                  </div>
                  <div>
                    <small class="text-muted">Last Updated</small>
                    <h6 class="mb-0">{% now "F j, Y H:i" %}</h6>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- CREATE POST MODAL -->
    <div class="modal fade" id="createPostModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">
              <i class="fas fa-plus-circle mr-2"></i>Create New Post
            </h5>
            <button type="button" class="close text-white" data-dismiss="modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <form method="post" enctype="multipart/form-data" id="postForm">
              {% csrf_token %}
              <input type="hidden" name="form_type" value="create" />

              <div class="form-group">
                <label class="font-weight-bold">Title *</label>
                <input
                  type="text"
                  name="title"
                  class="form-control form-control-lg"
                  placeholder="Enter a compelling title..."
                  required
                />
                <small class="text-muted"
                  >Keep it under 60 characters for best results</small
                >
              </div>

              <div class="form-group">
                <label class="font-weight-bold">Featured Image *</label>
                <div class="custom-file">
                  <input
                    type="file"
                    name="image"
                    class="custom-file-input"
                    id="postImage"
                    required
                    accept="image/*"
                  />
                  <label class="custom-file-label" for="postImage"
                    >Choose image file</label
                  >
                </div>
                <div
                  class="mt-3 text-center"
                  id="imagePreviewContainer"
                  style="display: none"
                >
                  <img
                    id="imagePreview"
                    class="img-fluid rounded"
                    style="max-height: 250px; border: 3px dashed #dee2e6"
                  />
                </div>
              </div>

              <div class="form-group">
                <label class="font-weight-bold">Content *</label>
                <textarea
                  name="content"
                  class="form-control"
                  rows="8"
                  placeholder="Write your content here..."
                  required
                ></textarea>
                <small class="text-muted"
                  >Minimum 100 characters recommended</small
                >
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="font-weight-bold">Initial Status</label>
                    <select name="initial_status" class="form-control">
                      <option value="draft">Save as Draft</option>
                      <option value="hold">Save and Hold</option>
                      <option value="publish">Publish Immediately</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="font-weight-bold">Category (Optional)</label>
                    <input
                      type="text"
                      name="category"
                      class="form-control"
                      placeholder="e.g., Announcement, Update"
                    />
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-between mt-4">
                <button
                  type="button"
                  class="btn btn-outline-secondary"
                  data-dismiss="modal"
                >
                  <i class="fas fa-times mr-2"></i>Cancel
                </button>
                <button type="submit" class="btn btn-primary px-4">
                  <i class="fas fa-paper-plane mr-2"></i>Create Post
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Image Preview
      document.getElementById('postImage')?.addEventListener('change', function(e){
          const file = e.target.files[0];
          const preview = document.getElementById('imagePreview');
          const container = document.getElementById('imagePreviewContainer');
          const label = this.nextElementSibling;

          if(file){
              label.textContent = file.name;
              const reader = new FileReader();
              reader.onload = e => {
                  preview.src = e.target.result;
                  container.style.display='block';
              };
              reader.readAsDataURL(file);
          } else {
              container.style.display='none';
              label.textContent = 'Choose image file';
          }
      });

      // Filter and Search
      document.getElementById('searchInput')?.addEventListener('input', filterPosts);
      document.getElementById('statusFilter')?.addEventListener('change', filterPosts);
      document.getElementById('sortFilter')?.addEventListener('change', sortPosts);

      function filterPosts() {
          const searchTerm = document.getElementById('searchInput').value.toLowerCase();
          const statusFilter = document.getElementById('statusFilter').value;
          const rows = document.querySelectorAll('.post-row');
          let visibleCount = 0;

          rows.forEach(row => {
              const title = row.querySelector('.post-title').textContent.toLowerCase();
              const status = row.dataset.status;
              const matchesSearch = title.includes(searchTerm);
              const matchesStatus = statusFilter === 'all' || status === statusFilter;

              if (matchesSearch && matchesStatus) {
                  row.style.display = '';
                  visibleCount++;
              } else {
                  row.style.display = 'none';
              }
          });

          document.getElementById('visibleCount').textContent = visibleCount;
      }

      function sortPosts() {
          const sortBy = document.getElementById('sortFilter').value;
          const tableBody = document.getElementById('postsTableBody');
          const rows = Array.from(tableBody.querySelectorAll('.post-row'));

          rows.sort((a, b) => {
              switch(sortBy) {
                  case 'newest':
                      return new Date(b.querySelector('.post-date').textContent) - new Date(a.querySelector('.post-date').textContent);
                  case 'oldest':
                      return new Date(a.querySelector('.post-date').textContent) - new Date(b.querySelector('.post-date').textContent);
                  case 'title':
                      return a.querySelector('.post-title').textContent.localeCompare(b.querySelector('.post-title').textContent);
                  default:
                      return 0;
              }
          });

          rows.forEach(row => tableBody.appendChild(row));
      }

      // Export function
    function exportData() {
          alert('Export feature would generate CSV/PDF report here');
          // In production, this would make an AJAX call to generate report
      }

      function editPost(postId) {
          alert(`Edit post ${postId} - This would open edit modal in production`);
          // In production, this would open edit modal with post data
      }

      function showAllPosts() {
          document.getElementById('statusFilter').value = 'all';
          document.getElementById('searchInput').value = '';
          filterPosts();
      }

      // Auto-refresh statistics every 30 seconds
      setInterval(function() {
          // In production, this would make an AJAX call to update stats
          const totalChange = document.getElementById('totalChange');
          totalChange.innerHTML = '<i class="fas fa-sync-alt text-primary mr-1"></i> Updated just now';

          setTimeout(() => {
              totalChange.innerHTML = '<i class="fas fa-arrow-up text-success mr-1"></i> Updated just now';
          }, 1000);
      }, 30000);

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function() {
          initializeChart();
          filterPosts();

          // Show notification if there are pending posts
          const pendingCount = {{ pending_count|default:0 }};
          if (pendingCount > 0) {
              console.log(`You have ${pendingCount} posts waiting for approval`);
          }
      });

      // Custom file input label
      $(document).ready(function() {
          bsCustomFileInput.init();
      });
    </script>

    <!-- Bootstrap custom file input -->
    <script src="https://cdn.jsdelivr.net/npm/bs-custom-file-input/dist/bs-custom-file-input.min.js"></script>
  </body>
</html>
